steps:
- task: DownloadPipelineArtifact@2
  inputs: 
    artifactName: '${{parameters.outName}}'
    targetPath: '${{parameters.outPath}}\${{parameters.outName}}'

- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
      dir "${{parameters.outPath}}"
      Invoke-Sqlcmd -InputFile "${{parameters.outPath}}\${{parameters.outName}}" -ServerInstance $(SQLPoolEndpoint) -Database $(DestinationDB) -Username "$(SQLPooluser)" -Password '$(SQLPoolpw)' -QueryTimeout 36000 -Verbose
  displayName: 'Run SQL Script'